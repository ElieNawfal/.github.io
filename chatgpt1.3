const lit = require('openai').default;

// Set up your OpenAI API credentials
lit.configure({
  apiKey: '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'
});

function chatPrompt() {
  const readline = require('readline').createInterface({
    input: process.stdin,
    output: process.stdout
  });

  return new Promise((resolve) => {
    readline.question('User: ', (input) => {
      resolve(input);
      readline.close();
    });
  });
}

async function generateResponse(prompt) {
  // Generate a response using the ChatGPT model
  const response = await lit.complete({
    model: 'gpt-3.5-turbo',
    prompt: prompt,
    maxTokens: 50
  });

  // Extract the reply from the response
  const reply = response.choices[0].text.trim();

  // Return the reply
  return reply;
}

// Example usage
async function chatLoop() {
  while (true) {
    const user_input = await chatPrompt();
    const answer = await generateResponse(user_input);
    console.log('ChatGPT:', answer);
  }
}

chatLoop();
